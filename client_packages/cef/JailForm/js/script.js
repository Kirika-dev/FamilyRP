function dynamicScriptLoad(a){document.write(`<script type="text/javascript" src="${a+"?r="+Math.random()}"></script>`)}function dynamicStyleLoad(a){var b=document.createElement("link");b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),b.setAttribute("href",a+"?r="+Math.random()),document.head.appendChild(b)}if("undefined"==typeof mp){mp={trigger:()=>{},localTestBrowser:!0},window.rpc={on:()=>{}};dynamicStyleLoad("./css/fonts.css"),dynamicStyleLoad("./css/style.css"),dynamicStyleLoad("./css/help.css"),dynamicStyleLoad("https://use.fontawesome.com/releases/v5.8.1/css/all.css"),dynamicScriptLoad("jquery.js"),dynamicScriptLoad("rage-rpc.min.js"),dynamicScriptLoad("vue.dev.js"),dynamicScriptLoad("serverAPI.js"),dynamicScriptLoad("preventSelection.js"),dynamicScriptLoad("Chart.min.js"),dynamicScriptLoad("rangeslider.min.js"),dynamicScriptLoad("progressbar.min.js"),dynamicScriptLoad("vue-color.min.js")}const menuManagerMap=new Map;class MenuManager{constructor(a,b){if(this.name=a,!b.data)return alert(`[MENU ERROR] ${a}: data ???`);if(!b.methods)return alert(`[MENU ERROR] ${a}: methods ???`);if(!b.load)return alert(`[MENU ERROR] ${a}: load method ???`);if(!b.close)return alert(`[MENU ERROR] ${a}: close method ???`);let c=this;this.vue=new Vue({el:"#"+a,components:null==b.components?{}:b.components,data:{currentMenu:c,...b.data,loaded:!1},methods:{__load:b.load,async load(a){await this.__load(a),this.loaded=!0},__close:b.close,close(){this.__close(),this.loaded=!1},...b.methods},computed:null==b.computed?{}:b.computed,mounted:null==b.mounted?function(){}:b.mounted}),menuManagerMap.set(a,this)}load(a){this.vue.load(a)}isOpen(){return this.vue.loaded}close(){mp.trigger("client_menuManager_taskClose",this.name)}}rpc.on("menuManager_menu_open",function(a){const b=menuManagerMap.get(a.menu);b&&b.load(a.data)}),rpc.on("menuManager_menu_close",function(a){const b=menuManagerMap.get(a);b&&b.vue.close()});