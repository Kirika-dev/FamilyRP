!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.ArcProgress=b():a.ArcProgress=b()}(window,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&"object"==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&c&&"string"!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=0)}([function(b,c,d){"use strict";var q=this&&this.__assign||function(){return(q=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var f in b=arguments[c])Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f]);return a}).apply(this,arguments)},f=this&&this.__rest||function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]])}return c},g=this&&this.__spreadArrays||function(){for(var b=0,c=0,d=arguments.length;c<d;c++)b+=arguments[c].length;var f=Array(b),g=0;for(c=0;c<d;c++)for(var h=arguments[c],i=0,j=h.length;i<j;i++,g++)f[g]=h[i];return f};Object.defineProperty(c,"__esModule",{value:!0});var z=d(1),j=Math.PI,a=function(){function a(i){var A=this,e=i.size,o=i.el,r=i.textStyle,n=void 0===r?{}:r,a=i.arcStart,h=void 0===a?144:a,l=i.arcEnd,c=void 0===l?396:l,p=i.progress,s=i.text,f=i.thickness,d=i.fillThickness,t=void 0===d?0:d,g=i.emptyColor,u=i.fillColor,m=i.lineCap,v=i.animation,b=i.speed,x=void 0===b?0:b,y=i.customText,k=i.animationEnd,B=void 0===k?function(){}:k,C=i.onError,w=void 0===C?function(){}:C,j=i.observer;this.percentage=0,this.speed=1,this.speedOption=0,this.type="increase",this.isEnd=!1,this.emptyColor="#efefef",this.fillColor="#6bd5c8",this.lineCap="round",this.increaseValue=0,this.frequency=0,this.lastNumber=0,this.prevProgress=0,this.prevText="0",this.textValue=0,this.drawProgressAnimate=function(){!1===A.animation&&(A.percentage=A.progress),A.isEnd=A.percentage===A.progress,A.ctx.clearRect(0,0,A.size,A.size),A.drawBackground(),A.drawText(),A.drawProgress(),A.isEnd||("increase"===A.type?(A.accumulation(),A.requestAnimationFrame(A.drawProgressAnimate)):"decrease"===A.type&&(A.accumulation(),A.requestAnimationFrame(A.drawProgressAnimate)))},this.resetOptions=function(b){var c=b.progress,d=b.thickness,e=b.textStyle,f=b.size,g=b.speed;if("number"==typeof c){var a=100*c;A.type=a>A.progress?"increase":"decrease",A.progress=a,A.optionProgress=c}d&&(A.thickness=2*d),e&&(A.textStyle=q(q({},A.textStyle),e)),f&&(A.size=2*f),"number"==typeof g&&(A.speedOption=g)},this.size=2*(e||200),this.arcStart=h,this.arcEnd=c,this.optionProgress=p,this.progress=100*p,this.text=s,this.el=o,this.thickness=2*(f||12),this.fillThickness=2*t||this.thickness,this.animationEnd=B,this.onError=w,this.emptyColor=g,this.fillColor=u||this.fillColor,this.lineCap=m||this.lineCap,this.animation=v,this.textStyle=q({size:"18px",color:"#000",x:this.size/4,y:this.size/4},n),this.customText=y||[],this.observer=j,this.speedOption=x;var D="object"===z.type(this.fillColor)&&!!this.fillColor.image;this.init({updateImg:D})}return Object.defineProperty(a.prototype,"isEmptyProgressBig",{get:function(){return this.thickness>=this.fillThickness},enumerable:!0,configurable:!0}),a.prototype.init=function(a){var b=this,c=a||{},d=c.notCreate,e=c.updateImg;this.createCanvas(d),this.setSpeed(),this.text&&this.setIncreaseValue(),this.sourceLoad(e).then(function(){return b.drawProgressAnimate()}).catch(function(a){return b.onError(a)})},a.prototype.createCanvas=function(a){var b="string"==typeof this.el?document.querySelector(this.el):this.el;a||(this.canvas=document.createElement("canvas"));var c=this.size/2;b.style.width=c+"px",b.style.height=c+"px",this.canvas.width=this.size,this.canvas.height=this.size,this.canvas.style.width=c+"px",this.canvas.style.height=c+"px",this.canvas.style.width="block",a||(b.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"))},a.prototype.drawBackground=function(){var a=this.ctx,b=this.size/2,c=this.arcStart/180*j,d=this.arcEnd/180*j;a.beginPath(),a.lineWidth=this.thickness,a.lineCap=this.lineCap,a.strokeStyle=this.emptyColor;var e=this.isEmptyProgressBig?b-this.thickness:b-this.thickness-(this.fillThickness-this.thickness);a.arc(b,b,e,c,d,!1),a.stroke(),a.closePath()},a.prototype.computedArc=function(){var a=this.arcStart/180,b=(this.arcEnd/180-a)*(this.percentage/100)+a;return{start:a*j,end:b*j}},a.prototype.setSpeed=function(){var a=this.speedOption,b=this.animation,c=this.progress,d=this.prevProgress,e=c>d?c-d:d-c;b&&"number"==typeof b?this.speed=e/(b/(1e3/60)):"number"==typeof a&&(this.speed=1,this.speed+=0<a?a/40:a/101),this.frequency=e/this.speed},a.prototype.setIncreaseValue=function(){var a=+this.text,b=+this.prevText,c=(a>b?a-b:b-a)/this.frequency;!z.isInt(this.text)||c%2&&c%5||(c=0<c-1?c-=1:1),this.increaseValue=c},a.prototype.computedText=function(){var a=this.lastNumber,b=z.isInt(this.text);if("increase"===this.type?this.textValue+=this.increaseValue:this.textValue-=this.increaseValue,this.isEnd)return this.text;if(!b){var c=this.text.split(".")[1].length;return this.lastNumber=9===a?0:a+1,1<c?this.textValue.toFixed(c-1)+this.lastNumber:this.textValue.toFixed(0)+"."+this.lastNumber}return Math.floor(this.textValue)+""},a.prototype.sourceLoad=function(a){var b=this;return new Promise(function(c,d){if("object"===z.type(b.fillColor)&&a){b.drawBackground();var e=b.fillColor.image,f=new Image;f.src=e,f.onload=function(){b.fillImage=f,c(!0)},f.onerror=function(a){d(a)}}else c(!1)})},a.prototype.setFillColor=function(a){var b=z.type(this.fillColor);if("string"===b)a.strokeStyle=this.fillColor;else if("object"===b&&this.fillColor.image){var c=a.createPattern(this.fillImage,"no-repeat");a.strokeStyle=c}else{for(var d=this.fillColor.gradient,e=a.createLinearGradient(0,0,this.size,0),f=d.length,g=0,i=0;i<f;i++)e.addColorStop(g,d[i]),g+=1/f;a.strokeStyle=e}},a.prototype.drawProgress=function(){var a=this.ctx,b=this.size/2,c=this.computedArc(),d=c.start,e=c.end;a.beginPath(),a.lineWidth=this.fillThickness,a.lineCap=this.lineCap,this.setFillColor(a);var f=this.isEmptyProgressBig?b-this.fillThickness-(this.thickness-this.fillThickness):b-this.fillThickness;a.arc(b,b,f,d,e,!1),a.stroke(),a.closePath(),this.observer&&this.observer(this.percentage,this.currentText),this.isEnd&&this.animationEnd({progress:this.optionProgress,text:this.text})},a.prototype.setText=function(b,g){var e=g.text,j=g.size,i=void 0===j?"14px":j,k=g.color,m=void 0===k?"#000":k,n=g.x,a=void 0===n?10:n,h=g.y,l=void 0===h?10:h,c=g.font,o=void 0===c?"sans-seri":c,p=2*parseInt(i,10),f=i.substring((p+"").length)||"px";b.font=""+p+f+" "+o,b.fillStyle=m,b.textAlign="center",b.textBaseline="middle",b.fillText(e,2*a,2*l)},a.prototype.drawText=function(){var a=this.ctx,b=this.text&&this.computedText();this.currentText=b;var c=[];b&&c.push(q({text:b},this.textStyle)),c=g(c,this.customText);for(var d=0;d<c.length;d++)this.setText(a,c[d])},a.prototype.requestAnimationFrame=function(a){return window.requestAnimationFrame(a)},a.prototype.accumulation=function(){"increase"===this.type?(this.percentage+=this.speed,this.percentage>this.progress&&(this.percentage=this.progress)):(this.percentage-=this.speed,this.percentage<this.progress&&(this.percentage=this.progress))},a.prototype.updateProgress=function(b){var d=this;this.prevProgress=this.progress,this.prevText=this.text;var e=b.progress,g=b.thickness,i=b.textStyle,j=b.size,a=b.speed,h=f(b,["progress","thickness","textStyle","size","speed"]);if(this.isEnd&&this.prevProgress!==100*e){this.resetOptions({progress:e,thickness:g,textStyle:i,size:j,speed:a}),Object.keys(h||{}).forEach(function(a){return d[a]=h[a]});var k="object"===z.type(h.fillColor)&&!h.fillColor.image;this.init({updateImg:k,notCreate:!0})}},a.prototype.destroy=function(){var a=this.canvas.parentNode;a&&a.removeChild(this.canvas)},a}();c.default=a},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.isInt=function(a){return void 0===a&&(a=""),1===a.split(".").length},b.type=function(a){return Object.prototype.toString.call(a).match(/[A-Z]\w+/)[0].toLowerCase()}}]).default});